<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{layout}">

<head>
    <meta charset="UTF-8">
<<<<<<< HEAD
    <title>SaveUs - My Page</title>
    <link rel="stylesheet" th:href="@{/css/layout.css}">
=======
    <title>My Page</title>
>>>>>>> home2
    <link rel="stylesheet" th:href="@{/css/myPage.css}">
</head>

<main layout:fragment="content">

<<<<<<< HEAD
    <h2 class="section-title">My Page & Settings</h2>

    <!-- 프로필 영역 -->
    <section class="profile-section">
        <div class="profile-card">
            <div class="profile-banner"></div>

            <div class="profile-inner">
                <img class="profile-img"
                     th:src="${user.profileImageUrl != null ? user.profileImageUrl : '/images/user-default.png'}"
                     alt="User">

                <div class="profile-info">
                    <!-- 닉네임 -->
                    <h3 class="profile-name" th:text="${user.nickname}">사용자 닉네임</h3>

                    <!-- 사용자 타입(예: 식습관 유형) -->
                    <span class="profile-type" th:text="${user.mainGoal != null ? user.mainGoal : 'Balanced Explorer'}">
                        Balanced Explorer
                    </span>

                    <!-- 이메일 -->
                    <p class="profile-email" th:text="${user.email}">email@example.com</p>

                    <!-- 가입일 -->
                    <p class="profile-date">
                        Member since:
                        <span th:text="${#dates.format(user.createdAt, 'yyyy-MM-dd')}">2025</span>
                    </p>
                </div>

                <button class="profile-edit-btn"
                        onclick="location.href='/my-page/edit'">프로필 수정</button>
            </div>
        </div>
    </section>

    <!-- 업적 -->
    <section class="badge-section">
        <h3 class="content-title">My Achievements</h3>
        <div class="badge-container">
            <div class="badge-card">Veggie Vanguard</div>
            <div class="badge-card">Macro Master</div>
            <div class="badge-card">Sugar Slayer</div>
            <div class="badge-card">Diet Virtuoso</div>
        </div>
    </section>

    <!-- 진행중인 챌린지 -->
    <section class="challenge-section">
        <h3 class="content-title">Active Challenges</h3>
        <div class="challenge-container">
            <div class="challenge-card">
                <h4>30-Day Sugar Detox</h4>
                <p>7일 남음</p>
                <div class="progress-bar">
                    <div class="progress-fill" style="width:75%"></div>
                </div>
            </div>

            <div class="challenge-card">
                <h4>Veggie Vanguard</h4>
                <p>18일 남음</p>
                <div class="progress-bar">
                    <div class="progress-fill" style="width:40%"></div>
                </div>
            </div>
        </div>
    </section>

    <!-- 계정 설정 -->
    <section class="account-section">
        <h3 class="content-title">Account Actions</h3>
        <div class="account-btns">
            <button class="logout-btn" onclick="location.href='/logout'">로그아웃</button>
            <button class="delete-btn">회원탈퇴</button>
=======
    <!-- ⚠ user 자체가 null이면 자동으로 로그인페이지로 이동 -->
    <th:block th:if="${user == null}">
        <script>
            alert("로그인이 필요합니다.");
            location.href = "/login";
        </script>
    </th:block>

    <h2 class="section-title">My Page & Settings</h2>

    <section class="profile-section">
        <div class="profile-card">

            <!-- 이미지 null-safe -->
            <img class="profile-img"
                 th:src="${(user != null and user.profileImageUrl != null)
                         ? user.profileImageUrl
                         : '/images/user-default.png'}">

            <!-- 닉네임 -->
            <h3 th:text="${user != null ? user.nickname : ''}">닉네임</h3>

            <!-- 이메일 -->
            <p th:text="${user != null ? user.email : ''}">email</p>
>>>>>>> home2
        </div>
    </section>

</main>
</html>
